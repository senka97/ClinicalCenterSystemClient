<div class="container-fluid">
    <nav class="navbar navbar-expand-md navbar-dark bg-dark">
        
        <div class="mx-auto order-0">
            <a class="navbar-brand mx-auto disabled" href="#">Home page for doctor: {{_currentDoctor.name}} {{_currentDoctor.surname}}</a>
            <button class="navbar-toggler" type="button" data-toggle="collapse" data-target=".dual-collapse2">
                <span class="navbar-toggler-icon"></span>
            </button>
        </div>
        <div class="navbar-collapse collapse w-100 order-3 dual-collapse2">
            <ul class="navbar-nav ml-auto">
                <li class="nav-item">
                    <a class="nav-link" [routerLink]="['/medicalStaffProfile']">Profile</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" [routerLink]="" (click)="clickedLogout()">Log out</a>
                </li>
            </ul>
        </div>
    </nav>
    <ul class="nav flex-column bg-dark" style="width: 20%;color: azure;float:left;">
        <li class="nav-item">
          <a class="nav-link" [routerLink]="" (click)="showAllPatients()">All patients in the clinic</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="#">Start a medical exam</a>
        </li>
        <li class="nav-item">
            <a class="nav-link" href="#">Make an appointment for an exam or surgery</a>
          </li>
        <li class="nav-item">
            <a class="nav-link" [routerLink]="" (click)="showFormRequest()">Make a request for an absence or paid vacation</a>
        </li>  
        <li class="nav-item">
          <a class="nav-link" href="#">Work calendar</a>
        </li>
        
      </ul>

      <div *ngIf="_showFormRequest" style="width: 60%;margin-left: 15%;float:left;">
        <h3 style="text-align:center;margin-top: 0.5em; margin-bottom: 0.5em;">Request for paid vacation or absence</h3>
        <form style="margin:auto;background-color:#36393E;width:70%;padding:1em;" #absenceForm="ngForm" (ngSubmit) = "sendRequestAbsence()">
            <mat-form-field style="margin-left:35%;">
                <mat-label>Type of absence</mat-label>
                <mat-select  [(ngModel)]="_selectedType" name="typeAbsence"  required>
                   <mat-option  *ngFor="let type of _typesAbsence" [value]="type.value">
                     {{type.viewValue}}
                   </mat-option>
                </mat-select>
            </mat-form-field>
            <ngb-datepicker style="margin-left:7%;background-color: white;" #dp (select)="onDateSelection($event)" [displayMonths]="2" [dayTemplate]="t" outsideDays="hidden">
            </ngb-datepicker>
            
            <ng-template #t let-date let-focused="focused">
              <span class="custom-day"
                    [class.focused]="focused"
                    [class.range]="isRange(date)"
                    [class.faded]="isHovered(date) || isInside(date)"
                    (mouseenter)="hoveredDate = date"
                    (mouseleave)="hoveredDate = null">
                {{ date.day }}
              </span>
            </ng-template>
            <button class="btn btn-primary" style="background-color: green;margin-top:1em;margin-right:2em;width:6em;" type="submit" [disabled]="!absenceForm.form.valid">Send</button>
            <button class="btn btn-primary" style="background-color: red;margin-top:1em;margin-right:2em;width:6em;" type="reset" (click)="cancelAbsence()">Cancel</button>
        </form>
  </div>
  <div *ngIf="_showList" style="float:left;margin-left:18%;">
    <h3 style="text-align:center;margin-top: 0.5em; margin-bottom: 0.5em;">All patients in the clinic</h3>
    <table class="table">
        <thead class="thead-dark">
          <tr>
            <th scope="col">#</th>
            <th scope="col">Name</th>
            <th scope="col">Surname</th>
            <th scope="col">Serial number</th>
            <th scope="col">Email</th>
            <th scope="col">Details</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let patient of _patients;let i = index">
            <th scope="row">{{i+1}}</th>
            <td>{{patient.name}}</td>
            <td>{{patient.surname}}</td>
            <td>{{patient.serialNumber}}</td>
            <td>{{patient.email}}</td>
            <!--<td><a [routerLink]="[{ outlets: { hpDoctor: ['patientDetails' , patient.id] } }]">See details...</a></td>-->
            <td><a [routerLink]="" (click)="showDetails(patient.id)">See details...</a></td>
        
          </tr>
        </tbody>
      </table>
  </div>
  <div *ngIf="_showPatient" style="float:left;margin-left:18%;width:40%;">
    <h3 style="text-align: center;margin-top: 0.5em; margin-bottom: 0.5em;">Patient: {{_currentPatient.name}}  {{_currentPatient.surname}}</h3>
    <table class="table" style="width:100%">
      <tr><td><b>Serial number:</b></td><td>{{_currentPatient.serialNumber}}</td></tr>
      <tr><td><b>Email:</b></td><td>{{_currentPatient.email}}</td></tr>
      <tr><td><b>Address:</b></td><td>{{_currentPatient.address}}</td></tr>
      <tr><td><b>City:</b></td><td>{{_currentPatient.city}}</td></tr>
      <tr><td><b>Country:</b></td><td>{{_currentPatient.country}}</td></tr>
      <tr><td><b>Phone number:</b></td><td>{{_currentPatient.phoneNumber}}</td></tr>
    </table>
    <button style="float: left;width:7em;" type="button" class="btn btn-primary btn-sm" [routerLink] = "['/patientHP', _currentPatient.id]" >Profile</button>
    <button style="float: right;width:7em;" type="button" class="btn btn-primary btn-sm" (click)="goBack()">Back</button>
  </div>
      
  </div>
